version: 2

jobs:
  build:
    docker:
      - image: 'circleci/node'
    steps:
      - checkout
      - run: npm install
      # - run: npm rebuild node-sass
      - run: npm run build
      # - aws s3 sync dist/ s3://www.southsidegardencentre.co.nz --exclude "*.jpg" --exclude "*.png" --exclude "pages/*" --exclude "*.html" --exclude "*.css" --include "index.html" --region ap-southeast-2 --delete
      # - aws s3 sync dist/ s3://www.southsidegardencentre.co.nz --exclude "*" --include "*.jpg" --include "*.png" --include "*.css" --region ap-southeast-2 --delete --metadata-directive REPLACE --expires 2034-01-01T00:00:00Z --acl public-read --cache-control max-age=2592000,public
      # - aws s3 sync dist/pages s3://www.southsidegardencentre.co.nz --region ap-southeast-2 --content-type text/html

workflows:
  version: 2
  build-and-deploy:
    jobs:
      - build
      # - deploy:
      #     requires:
      #       - build